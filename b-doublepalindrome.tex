\begin{frame}
  \begin{center}
    \LARGE <<Двойной палиндром>>
  \end{center}

  \begin{center}
      \includegraphics[width=4cm]{memes/b-meme.jpg}
  \end{center}

  \begin{itemize}
  \item Идея задачи --- Дмитрий Ковальков
  \item Разработка задачи --- Дмитрий Ковальков
  \end{itemize}

\end{frame}

\begin{frame}{Постановка задачи}

  \begin{itemize}
  \item Для заданной строки посчитать количество подстрок, являющихся двойными палиндромами
  \item Двойной палиндром --- конкатенация двух палиндромов одинаковой длины
  \end{itemize}
  
\end{frame}

\begin{frame}{Решение за $\O(n^3)$ (19 баллов)}
  \begin{itemize}
  \item Явно переберем все подстроки
  \item Проверим что левая и правая половина являются палиндромами за $O(n)$
  \end{itemize}
\end{frame}

\begin{frame}{Решение за $\O(n^2)$ (33 балла)}
  \begin{itemize}
  \item Проверять что подстрока является палиндромом можно за $O(1)$ с помощью алгоритма Манакера или hash-функции
  \end{itemize}
\end{frame}

\begin{frame}{Полное решение}
  \begin{itemize}
  \item Бывает случай чётной длины палиндрома и нечётной, рассмотрим их отдельно.
  \item Попробуем понять, когда два выбранных центра палиндромов порождают двойной палнидром.
  \item $LCenter$, $RCenter$ --- позиции центров левого и правого палиндромов
  \item $LRadius$, $RRadius$ --- радиусы максимальных палиндромов из позиций LCenter и RCenter
  \item Случаи когда дистанция между центрами нечётна не рассматриваем.
  \end{itemize}
\end{frame}

\begin{frame}{Полное решение}
  \begin{itemize}
  \item Необходимые условия:
  \end{itemize}
  \begin{equation*}
    \begin{cases}
      \frac{RCenter - LCenter}{2} \leq LRadius 
      \\
      \frac{RCenter - LCenter}{2} \leq RRadius
    \end{cases}
  \end{equation*}

  \begin{itemize}
  \item Тогда оба палиндрома достаточно большие, чтобы образовать двойной палиндром.
  \end{itemize}
\end{frame}

\begin{frame}{Полное решение}
  \vspace{-2em}
  \begin{equation*}
    \begin{cases}
      RCenter \leq 2 \cdot LRadius + LCenter & (1)
      \\
      RCenter - 2 \cdot RRadius \leq LCenter  & (2)
      \\
      LCenter < RCenter & (3)
    \end{cases}
  \end{equation*}
  \begin{itemize}
  \item Перебираем $RCenter$, поддерживаем множество $LCenter$, для которых выполнены условия (1) и (3)
  \item Запросы на количество чисел в множестве с условием (2) можно делать с помощью Treap
  \item Итоговая сложность $O(n \log{n})$.
  \item Другое решение: выполнить двумерный запрос на отрезке, можно это делать используя дерево отрезков в offline.
  \end{itemize}
\end{frame}
